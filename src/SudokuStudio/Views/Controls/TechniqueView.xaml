<UserControl
	x:Class="SudokuStudio.Views.Controls.TechniqueView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:bs="using:SudokuStudio.BindableSource"
	xmlns:c="using:SudokuStudio.Views.Controls"
	xmlns:cvt="using:SudokuStudio.Interaction.Conversions"
	xmlns:vcvt="using:SudokuStudio.Interaction.ValueConverters"
	xmlns:wc="using:CommunityToolkit.WinUI.UI.Controls"
	mc:Ignorable="d" d:DataContext="{d:DesignInstance Type=c:TechniqueView}"
	x:Name="ThisObject">
	<UserControl.Resources>
		<vcvt:TechniqueSetToBooleanConverter x:Key="TechniqueExistenceConverter" />
	</UserControl.Resources>

	<Grid>
		<ScrollViewer>
			<ItemsRepeater ItemsSource="{x:Bind ItemsSource}">
				<ItemsRepeater.Layout>
					<wc:WrapLayout
						HorizontalSpacing="{x:Bind HorizontalSpacing,Mode=OneWay}"
						VerticalSpacing="{x:Bind VerticalSpacing,Mode=OneWay}" />
				</ItemsRepeater.Layout>
				<ItemsRepeater.ItemTemplate>
					<DataTemplate x:DataType="bs:TechniqueSetTechniqueBindableSource">
						<c:TokenButton
							Content="{x:Bind TechniqueName}" Tag="{x:Bind TechniqueField}"
							IsChecked="{Binding SelectedTechniques,
								ElementName=ThisObject,
								Converter={StaticResource TechniqueExistenceConverter},
								ConverterParameter={Binding Tag,RelativeSource={RelativeSource Mode=Self}},
								Mode=OneWay}"
							Foreground="{x:Bind cvt:DifficultyLevelConversion.GetForegroundColor(DifficultyLevel)}"
							Background="{x:Bind cvt:DifficultyLevelConversion.GetBackgroundColor(DifficultyLevel)}"
							Checked="TokenButton_Checked" Unchecked="TokenButton_Unchecked" />
					</DataTemplate>
				</ItemsRepeater.ItemTemplate>
			</ItemsRepeater>
		</ScrollViewer>
	</Grid>
</UserControl>
